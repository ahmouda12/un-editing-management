import{ah as P,aj as h,ak as C,al as k}from"./index-B252NKV0.js";import{s as z,a as E}from"./loadable-13e9ffb2-DArKAAV8.js";import{a as R,c as S,d as M}from"./form-8ec29459-Au8Fr9DP.js";import{g as F,n as L,c as V,d as T}from"./locale-60f8ca58-owi61rSf.js";import{v as H}from"./dom-b6dedd88-BL1g3sLh.js";import{c as I}from"./observers-9c166451-CD-vLZ5G.js";import"./key-3ee05994-D63ExP77.js";import"./guid-9c230b6a-BxSjQh8J.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const n={container:"container",fill:"fill",stepLine:"step-line",label:"label",labelHidden:"label-hidden",labelRange:"label-range",labelValue:"label-value",unitLabel:"unit-label",stepsVisible:"steps-visible",valueVisible:"value-visible",success:"fill-success",warning:"fill-warning",danger:"fill-danger"},O=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host{display:flex;--calcite-meter-space-internal:0.125rem;--calcite-meter-height-internal:1rem;--calcite-meter-font-size-internal:var(--calcite-font-size--1)}:host([scale=s]){--calcite-meter-height-internal:0.75rem;--calcite-meter-font-size-internal:var(--calcite-font-size--2)}:host([scale=l]){--calcite-meter-height-internal:1.5rem;--calcite-meter-font-size-internal:var(--calcite-font-size-0)}.container{position:relative;margin:0px;display:flex;inline-size:100%;align-items:center;block-size:var(--calcite-meter-height-internal);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-border-3);border-radius:var(--calcite-meter-height-internal)}.solid{border:1px solid var(--calcite-color-foreground-3);background-color:var(--calcite-color-foreground-3)}.outline{background-color:transparent}.value-visible{margin-block-start:1.5rem}.steps-visible{margin-block-end:1.5rem}.step-line{position:absolute;inset-block:0px;display:block;inline-size:var(--calcite-meter-space-internal);background-color:var(--calcite-color-border-3)}.label{position:absolute;font-size:var(--calcite-meter-font-size-internal)}.label-hidden{visibility:hidden;opacity:0}.label-value{inset-block-end:calc(100% + 0.5em);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-1)}.label-range{color:var(--calcite-color-text-3);inset-block-start:calc(100% + 0.5em)}.unit-label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3)}.label-value .unit-label{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.fill{position:absolute;z-index:var(--calcite-z-index);display:block;background-color:var(--calcite-color-brand);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);inset-inline-start:var(--calcite-meter-space-internal);inset-block:var(--calcite-meter-space-internal);border-radius:var(--calcite-meter-height-internal);max-inline-size:calc(100% - var(--calcite-meter-space-internal) * 2);min-inline-size:calc(var(--calcite-meter-height-internal) - var(--calcite-meter-space-internal) * 2);transition-property:inline-size, background-color, box-shadow}.fill-danger{background-color:var(--calcite-color-status-danger)}.fill-success{background-color:var(--calcite-color-status-success)}.fill-warning{background-color:var(--calcite-color-status-warning)}.solid .fill{inset-block:0;inset-inline-start:0;max-inline-size:100%;min-inline-size:calc(var(--calcite-meter-height-internal));box-shadow:0 0 0 1px var(--calcite-color-brand)}.solid .fill-danger{box-shadow:0 0 0 1px var(--calcite-color-status-danger)}.solid .fill-success{box-shadow:0 0 0 1px var(--calcite-color-status-success)}.solid .fill-warning{box-shadow:0 0 0 1px var(--calcite-color-status-warning)}",$=O,A=class{constructor(e){P(this,e),this.labelFlipMax=.8,this.labelFlipProximity=.15,this.maxPercent=100,this.minPercent=0,this.resizeObserver=I("resize",()=>this.resizeHandler()),this.formatLabel=(i,t)=>{if(t==="percent"){if(!this.percentFormatting){const a=F(this.effectiveLocale),l=new Intl.NumberFormat(a,{useGrouping:this.groupSeparator,style:"percent"});this.percentFormatting={formatter:l,locale:a}}return this.percentFormatting.formatter.format(i)}else return L.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},L.localize(i.toString())},this.appearance="outline-fill",this.disabled=!1,this.fillType="range",this.form=void 0,this.groupSeparator=!1,this.high=void 0,this.label=void 0,this.low=void 0,this.max=100,this.min=0,this.name=void 0,this.numberingSystem=void 0,this.rangeLabels=!1,this.rangeLabelType="percent",this.scale="m",this.unitLabel="",this.value=void 0,this.valueLabel=!1,this.valueLabelType="percent",this.currentPercent=void 0,this.effectiveLocale=void 0,this.highActive=void 0,this.highPercent=void 0,this.lowActive=void 0,this.lowPercent=void 0}handleRangeChange(){this.calculateValues(),this.updateLabels()}handleLabelChange(){this.updateLabels()}async componentWillLoad(){z(this),this.calculateValues(),R(this,this.value)}componentDidLoad(){E(this),this.updateLabels()}connectedCallback(){var e;V(this),S(this),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;T(this),M(this),(e=this.resizeObserver)==null||e.disconnect()}resizeHandler(){this.updateLabels()}updateLabels(){this.valueLabelEl&&this.determineValueLabelPosition(),this.rangeLabels&&this.determineVisibleLabels()}calculateValues(){const{min:e,max:i,low:t,high:a,value:l}=this,s=100*(t-e)/(i-e),r=100*(a-e)/(i-e),c=100*(l-e)/(i-e);(!t||t<e||t>a||t>i)&&(this.low=e),(!a||a>i||a<t||a<e)&&(this.high=i),l||(this.value=e),this.lowPercent=s,this.highPercent=r,this.currentPercent=l?c:0,this.lowActive=!!t&&t>e&&(!l||t>l)&&(!a||t<a),this.highActive=!!a&&e<=a&&a<i&&(!l||a>l)&&(!t||a>t)}getMeterKindCssClass(){const{low:e,high:i,min:t,max:a,value:l}=this,s=e||t,r=i||a,c=l>=s,d=l<s,b=l>=r,o=l<r;return!l||!e&&o||d?n.success:c&&o?n.warning:b?n.danger:n.success}intersects(e,i){return e&&i&&H(e.getBoundingClientRect(),i.getBoundingClientRect())}determineVisibleLabels(){const{minLabelEl:e,lowLabelEl:i,highLabelEl:t,maxLabelEl:a}=this,l=this.intersects(t,a),s=this.intersects(i,t),r=this.intersects(i,a),c=this.intersects(e,t),d=this.intersects(e,i),b=this.intersects(e,a),o=n.labelHidden;i&&(d||r||s?i.classList.add(o):i.classList.remove(o)),t&&(c||r||l?t.classList.add(o):t.classList.remove(o)),e&&a&&(b?a.classList.add(o):a.classList.remove(o))}determineValueLabelPosition(){const{valueLabelEl:e,meterContainerEl:i,currentPercent:t}=this,a=t>100?100:t>0?t:0,l=e.getBoundingClientRect().width,s=i.getBoundingClientRect().width,r=100*(l-0)/(s-0);a+r>=100?(e.style.insetInlineEnd="0%",e.style.removeProperty("inset-inline-start")):(e.style.insetInlineStart=`${a}% `,e.style.removeProperty("inset-inline-end"))}renderMeterFill(){const{currentPercent:e,fillType:i}=this,t=this.getMeterKindCssClass();return h("div",{class:{[n.fill]:!0,[t]:i!=="single"},style:{width:`${e}%`}})}renderRangeLine(e){const i={insetInlineStart:`${e}%`};return h("div",{class:n.stepLine,style:i})}renderValueLabel(){const{currentPercent:e,valueLabelType:i,unitLabel:t,value:a}=this,l=this.formatLabel(i==="percent"?e/100:a||0,i);return h("div",{class:{[n.label]:!0,[n.labelValue]:!0},key:"low-label-line",ref:s=>this.valueLabelEl=s},l,t&&i!=="percent"&&h("span",{class:n.unitLabel}," ",t))}renderMinLabel(){const{rangeLabelType:e,min:i,minPercent:t,unitLabel:a}=this,l={insetInlineStart:`${t}%`},s=this.formatLabel(e==="percent"?t:i,e);return h("div",{class:{[n.label]:!0,[n.labelRange]:!0},key:"min-label-line",ref:r=>this.minLabelEl=r,style:l},s,a&&e!=="percent"&&h("span",{class:n.unitLabel}," ",a))}renderLowLabel(){const{rangeLabelType:e,low:i,lowPercent:t,highPercent:a,labelFlipProximity:l}=this,s=i?this.formatLabel(e==="percent"?t/100:i,e):"",r={insetInlineStart:`${t}%`},c={insetInlineEnd:`${100-t}%`},d=(a-t)/100<l?c:r;return h("div",{class:{[n.label]:!0,[n.labelRange]:!0},key:"low-label-line",ref:b=>this.lowLabelEl=b,style:d},s)}renderHighLabel(){const{rangeLabelType:e,high:i,highPercent:t,labelFlipMax:a}=this,l=i?this.formatLabel(e==="percent"?t/100:i,e):"",s={insetInlineStart:`${t}%`},r={insetInlineEnd:`${100-t}%`},c=t/100>=a?r:s;return h("div",{class:{[n.label]:!0,[n.labelRange]:!0},key:"high-label-line",ref:d=>this.highLabelEl=d,style:c},l)}renderMaxLabel(){const{rangeLabelType:e,max:i,maxPercent:t}=this,a={insetInlineEnd:`${100-t}%`},l=this.formatLabel(e==="percent"?t/100:i,e);return h("div",{class:{[n.label]:!0,[n.labelRange]:!0},key:"max-label-line",ref:s=>this.maxLabelEl=s,style:a},l)}render(){const{appearance:e,currentPercent:i,highActive:t,highPercent:a,label:l,lowActive:s,lowPercent:r,max:c,maxPercent:d,min:b,minPercent:o,rangeLabels:u,rangeLabelType:g,unitLabel:m,value:p,valueLabel:f,valueLabelType:v}=this,y=this.formatLabel(i/100,"percent"),w=`${p} ${m}`;return h(C,{key:"66acf0e583d412615e49ef652baf9bfbb97dab39"},h("div",{key:"eea0363c803ea0f4a1e2650aa543a4a0f2fe095c","aria-label":l,"aria-valuemax":g==="percent"?d:c,"aria-valuemin":g==="percent"?o:b,"aria-valuenow":v==="percent"?i:p,"aria-valuetext":v==="percent"?y:m?w:void 0,class:{[n.container]:!0,[n.stepsVisible]:u,[n.valueVisible]:f,[e]:e!=="outline-fill"},ref:x=>this.meterContainerEl=x,role:"meter"},this.renderMeterFill(),f&&this.renderValueLabel(),s&&this.renderRangeLine(r),t&&this.renderRangeLine(a),u&&this.renderMinLabel(),u&&s&&this.renderLowLabel(),u&&t&&this.renderHighLabel(),u&&this.renderMaxLabel()))}get el(){return k(this)}static get watchers(){return{min:["handleRangeChange"],max:["handleRangeChange"],low:["handleRangeChange"],high:["handleRangeChange"],value:["handleRangeChange"],rangeLabels:["handleLabelChange"],rangeLabelType:["handleLabelChange"],unitLabel:["handleLabelChange"],valueLabel:["handleLabelChange"],valueLabelType:["handleLabelChange"]}}};A.style=$;export{A as calcite_meter};
